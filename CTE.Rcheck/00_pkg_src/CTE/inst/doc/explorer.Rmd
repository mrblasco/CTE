---
title: "Cancer Trials Explorer (CTE) -- examples"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{explorer}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

Load libraries.  

```{r setup}
library(CTE)
library(dplyr, warn = FALSE) # for data wrangling 
library(DT) # use datatables to format outcomes
```

## Clinical trials listing bortezomib as intervention

The example below shows how to obtain a catalog of interventions in cancer-related clinical trials matched with the string `bortezomib`. 


```{r}
tbl <- find_intervention("bortezomib")
tbl
```

The function returns a list of interventions matched with the name `bortezomib`. 

Each intervention is associated with a unique clinical trial ID, title, status, date of registration, a detailed description of the study, and the number of enrolled subjects (either expected or actual) for `r dplyr::n_distinct(tbl$id)` clinical trials (out of `r nrow(tbl)` entries). 
 
I use the function `datatable` from the package `DT` to show the results  as HTML table. 

```{r}
DT::datatable(dplyr::select(tbl, -enrollment,-enrollment_type)
    , rownames = FALSE
    , filter = "top"
    , extensions = "Buttons"
    , plugins = "ellipsis"
    , options = list (
        dom = 'Bfrtip'
        , buttons =  c('copy', 'csv')
        , columnDefs = list(list(
                targets = c(2, 5)
                , render = JS("$.fn.dataTable.render.ellipsis( 125 )")
                )
            )
        )
    )
```
